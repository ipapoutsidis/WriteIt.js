var Cursor=function(){this.nodes=[],this.texts=[],this.init(),this.seo(),this.startAnimation()};Cursor.prototype.init=function(){var t=this;this.nodes=Array.from(document.querySelectorAll("*[cursor-animate]")),this.nodes.forEach(function(e){t.texts.push(e.innerHTML)})},Cursor.prototype.seo=function(){for(var t in this.nodes)if(this.nodes.hasOwnProperty(t)){var e=this.nodes[t],s=e.cloneNode(!0);e.style.display="none",this.nodes[t]=s,e.parentNode.appendChild(s)}},Cursor.prototype.startAnimation=function(){for(var t in this.nodes)this.nodes.hasOwnProperty(t)&&(this.nodes[t].hasAttribute("cursor-before")||new Node(this.nodes[t],this.texts[t]))};var Node=function(t,e){if(void 0==t||null==t)throw new Error("Node Must be a valid HTML Element");this.node=t,this.text=e,this.texts=[],this.reverse=!1,this.index=0,this.speed=0,this.nodeInnerHTML="",this.setSpeed(),this.node.hasAttribute("cursor-replace-next")&&(this.texts=this.node.getAttribute("cursor-replace-next").split(",")),this.animate()};Node.prototype.animate=function(){if(this.node.innerHTML="",this.nodeInnerHTML="",this.reverse){if(">"==this.text[this.index]){for(;"<"!=this.text[this.index];)this.nodeInnerHTML+=this.text[this.index],this.index--;this.nodeInnerHTML+=this.text[this.index],this.index--}for(var t=this.index;t>=0;t--)if(">"==this.text[t]){for(;"<"!=this.text[t];)this.nodeInnerHTML+=this.text[t],t--;this.nodeInnerHTML+=this.text[t]}else this.nodeInnerHTML+=this.text[t];this.nodeInnerHTML=this.nodeInnerHTML.split("").reverse().join(""),this.nodeInnerHTML+="|"}else{for(var e=0;e<this.index;e++)if("<"==this.text[e]){for(;">"!=this.text[e];)this.nodeInnerHTML+=this.text[e],e++;this.nodeInnerHTML+=this.text[e]}else this.nodeInnerHTML+=this.text[e];if(this.nodeInnerHTML+="|","<"==this.text[this.index]){for(;">"!=this.text[this.index];)this.index++;this.index++}}this.node.innerHTML=this.nodeInnerHTML,this.setSpeed(),this.handle()},Node.prototype.handle=function(){if(this.reverse)if(this.index--,this.index<0){if(!this.node.hasAttribute("cursor-replace-next"))return this.index=0,this.reverse=!1,void this.setTimeout(this.speed);for(var t=0;t<this.texts.length;t++)if(text[t]==text)return this.index=0,this.reverse=!1,t+1==this.texts.length?this.text=this.text[0]:this.text=this.texts[t+1],void this.setTimeout(this.speed);t==this.texts.length&&(this.text=this.texts[0],this.index=0,this.reverse=!1,this.setTimeout(this.speeed))}else this.reverse=!0,this.setTimeout(this.speed);else if(this.index++,this.index>this.text.length){if(this.node.hasAttribute("cursor-after"))try{var e=document.querySelector(this.node.getAttribute("cursor-after"));new Node(e,e.innerHTML),this.node.removeAttribute("cursor-after")}catch(t){console.log(t)}if(this.node.hasAttribute("cursor-replace-next"))this.index=this.text.length-1,this.reverse=!0,this.setTimeout(this.speed);else if(this.node.hasAttribute("cursor-loop"))this.index=0,this.setTimeout(this.speed);else if(this.node.hasAttribute("cursor-loop-reverse"))this.index=this.text.length-1,this.reverse=!0,this.setTimeout(this.speed);else{var s=this;setInterval(function(){s.node.innerHTML==s.text?s.node.innerHTML+="|":s.node.innerHTML=s.text},500)}}else this.setTimeout(this.speed)},Node.prototype.setTimeout=function(t){setTimeout(this.animate.bind(this),t)},Node.prototype.setSpeed=function(){if(this.node.hasAttribute("cursor-speed-fixed"))this.speed=1e3/this.node.getAttribute("cursor-speed-fixed");else if(this.node.hasAttribute("cursor-speed")){var t=1e3/this.node.getAttribute("cursor-speed");this.speed=Math.random()*(t+100-(t-100))+(t-100)}else this.speed=150*Math.random()+150},window.onload=function(){new Cursor};